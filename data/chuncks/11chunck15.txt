been extracted successfully ENOTOK An error occurred during parsing of the SOMEIP protocol header eg incorrect protocol version or insufficient buffer length bufferLength smaller than minimal SOMEIPheader length Description Function to extract the relevant SOMEIP protocol header fields of the message and the type of the message result At the time being this is limited to the types used for CS communication ie REQUEST and RESPONSE and OK and ERROR Available via SomeIpXfh cSRSXfrm00002 SWSSomeIpXf00296 dThe function SomeIpXfExtractProtocolHeader Fields specified in SWSSomeIpXf91001 shall extract the type of a message and the type of the message result from the SOMEIP protocol header and provide this in formation in a canonical representation via its output arguments cSRSXfrm00002 SWSSomeIpXf00297 dThe function SomeIpXfExtractProtocolHeader Fields specified in SWSSomeIpXf91001 shall check whether the provided bufferLength is larger or equal than the size of the protocol header processed by the SOMEIP transformer ie 8 bytes If this is not the case ENOTOK shall be returned Neither messageType normessageResult shall be modified in this case c SRSXfrm00002 SWSSomeIpXf00298 dThe function SomeIpXfExtractProtocolHeader Fields specified in SWSSomeIpXf91001 shall check whether the value of the Protocol Version field see PRSSOMEIP00052 is equal to the value defined by PRSSOMEIP00051 If this is not the case ENOTOK shall be returned Nei thermessageType normessageResult shall be modified in this case cSRSXfrm 00002 66 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 SWSSomeIpXf00299 dThe function SomeIpXfExtractProtocolHeader Fields specified in SWSSomeIpXf91001 shall check whether the value of the Message Type field see PRSSOMEIP00055 is equal REQUEST RESPONSE or ERROR If this is not the case ENOTOK shall be returned Neither messageType normessageResult shall be modified in this case cSRSXfrm00002 SWSSomeIpXf00301 dThe function SomeIpXfExtractProtocolHeader Fields specified in SWSSomeIpXf91001 shall return EOK in all other cases c SRSXfrm00002 SWSSomeIpXf00302 dThe function SomeIpXfExtractProtocolHead erFields specified in SWSSomeIpXf91001 shall set messageType to STDMESSAGETYPEREQUEST in case the value of the Message Type field see PRSSOMEIP00055 is equal REQUEST cSRSXfrm00002 SWSSomeIpXf00303 dThe function SomeIpXfExtractProtocolHead erFields specified in SWSSomeIpXf91001 shall set messageType to STDMESSAGETYPERESULT in case the value of the Message Type field see PRSSOMEIP00055 is equal RESULT orERROR cSRSXfrm00002 SWSSomeIpXf00304 dThe function SomeIpXfExtractProtocolHeader Fields specified in SWSSomeIpXf91001 shall set messageResult to STDMESSAGERESULTERROR in case the value of the Message Type field see PRSSOMEIP00055 is equal to ERROR or if the value of the Return Code field see PRSSOMEIP00058 is different from 0 cSRSXfrm00002 SWSSomeIpXf00305 dThe function SomeIpXfExtractProtocolHeader Fields specified in SWSSomeIpXf91001 shall set messageResult to STDMESSAGERESULTOK otherwise ie in case the value of the Message Type field see PRSSOMEIP00055 is different from ERROR and if the value of the Return Code field see PRSSOMEIP00058 is 0 cSRSXfrm00002 832 SomeIpXftransformerId SWSSomeIpXf00138 d Service Name SomeIpXftransformerId Syntaxuint8 SomeIpXftransformerId uint8 buffer uint32 bufferLength paramtype dataElement Service ID hex 0x03 SyncAsync Synchronous Reentrancy Non Reentrant Parameters in dataElement Data element which shall be transformed Parameters inout None 5 67 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 4 buffer Buffer allocated by the RTE where the transformed data has to be stored by the transformerParameters out bufferLength Used length of the buffer Return value uint8 0x00 EOK Serialization successful 0x81 ESERGENERICERROR A generic error occurred Description This function transforms a SenderReceiver communication using the serialization of SOMEIP It takes the data element as input and outputs a uint8 array containing the serialized data The length of the serialized data shall be calculated by the transformer during runtime and returned in the OUT parameter bufferLength It may be smaller than the maximum buffer size used by the RTE for buffer allocation Available via SomeIpXfh c SWSSomeIpXf00228 dIn function SomeIpXftransformerId defined in SWSSomeIpXf00138 paramtype is derived from type according to the parameter passing rules rules defined by the 15 SRS BSW General see SRSBSW00484 SRSBSW 00485 and SRSBSW00486 and 14 SWS BSW General see SWS BSW00186 and SWSBSW00187 type shall be the data type of the data element after all data conversion activities of the RTE transformerId shall be the name pattern for the transformer specified in SWSXfrm00062 3 ASWS Transformer General c This function specified in SWSSomeIpXf00138 exists for each transformed SenderReceiver communication which uses the SOMEIP serialization SWSSomeIpXf00139 dThe function SomeIpXftransformerId specified in SWSSomeIpXf00138 shall exist for the first reference in the list of ordered refer ences transformer from a DataTransformation to aTransformationTech nology if the DataTransformation is referenced by an ISignal in the role data Transformation where the ISignal references a SystemSignal which is refer enced by SenderReceiverToSignalMapping c SWSSomeIpXf00140 dThe function SomeIpXftransformerId specified in SWSSomeIpXf00138 shall serialize primitive or complex data elements of SenderReceiver communication into a linear byte array representation using the SOMEIP serialization c SWSSomeIpXf00214 dAfter serialization of the data the function SomeIpXftransformerId specified in SWSSomeIpXf00138 shall in crement the Session Handling ID counter assigned to transformerId if sessionHandlingSR is set to sessionHandlingActive c 68 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 SWSSomeIpXf00215 dWhen the Session Handling ID counter assigned to transformerId is 0xFFFF and gets incremented it shall rollover to 0x0001 in stead of 0x0000 if sessionHandlingSR is set to sessionHandlingActive c SWSSomeIpXf00141 d Service Name SomeIpXftransformerId Syntaxuint8 SomeIpXftransformerId const RteCsTransactionHandleType TransactionHandle uint8 buffer uint32 bufferLength StdReturnType returnValue paramtype data1 paramtype datan Service ID hex 0x03 SyncAsync Synchronous Reentrancy Non Reentrant TransactionHandle Transaction handle according to SWSRte08732 clientId and sequenceCounter needed to differentiate between multiple requests returnValue Return value from server side for transmission to the calling client This argument is only available for serializers of the response of a ClientServer communication if the ClientServerOperation has at least one PossibleError defined or autonomous error reaction is activated data1 ClientServer operation argument which shall be transformed in the same order as in the corresponding interface Parameters in datan ClientServer operation argument which shall be transformed in the same order as in the corresponding interface Parameters inout None buffer Buffer allocated by the RTE where the transformed data has to be stored by the transformerParameters out bufferLength Used length of the buffer Return value uint8 0x00 EOK Serialization successful 0x81 ESERGENERICERROR A generic error occurred Description This function transforms a ClientServer communication using the serialization of SOMEIP It takes the operation arguments and optionally