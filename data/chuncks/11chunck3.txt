arrays in the SOMEIP message sizeOfString LengthFieldsPositiveInteger 01 attr The size of all length fields in Bytes of dynamic length strings in the SOMEIP message This attribute is valid for all available occurrences of strings in the SOMEIP message sizeOfStruct LengthFieldsPositiveInteger 01 attr The size of all length fields in Bytes of structs in the SOMEIP message This attribute is valid for all available occurrences of structures in the SOMEIP message For a more fine granular modeling on the level of Data Prototypes the DataPrototypeTransformationProps shall be used sizeOfUnion LengthFieldsPositiveInteger 01 attr The size of all length fields in Bytes of unions in the SOMEIP message This attribute is valid for all available occurrences of Unions in the SOMEIP message For a more fine granular modeling on the level of Data Prototypes the DataPrototypeTransformationProps shall be used tlvDataId DefinitionTlvDataIdDefinitionSet ref This reference identifies the TlvDataIdDefinitions relevant for the enclosing SOMEIPTransformationISignalProps Table 72 SOMEIPTransformationISignalProps Enumeration ByteOrderEnum Package M2AUTOSARTemplatesGenericStructureGeneralTemplateClassesPrimitiveTypes Note When more than one byte is stored in the memory the order of those bytes may differ depending on the architecture of the processing unit If the least significant byte is stored at the lowest address this architecture is called little endian and otherwise it is called big endian ByteOrder is very important in case of communication between different PUs or ECUs 5 21 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 4 Enumeration ByteOrderEnum Literal Description mostSignificantByte FirstMost significant byte shall come at the lowest address also known as BigEndian or as MotorolaFormat Tags atpEnumerationLiteralIndex0 mostSignificantByte LastMost significant byte shall come highest address also known as LittleEndian or as IntelFormat Tags atpEnumerationLiteralIndex1 opaque For opaque data endianness conversion has to be configured to Opaque See AUTOSAR COM Specification for more details Tags atpEnumerationLiteralIndex2 Table 73 ByteOrderEnum Enumeration SOMEIPMessageTypeEnum Package M2AUTOSARTemplatesSystemTemplateTransformer Note Depending on the style of the communication different message types shall be set in the header of a SOMEIP message Literal Description notification A request of a notification expecting no response Tags atpEnumerationLiteralIndex1 request A request expecting a response Tags atpEnumerationLiteralIndex2 requestNoReturn A fireforget request Tags atpEnumerationLiteralIndex3 response The response message Tags atpEnumerationLiteralIndex4 Table 74 SOMEIPMessageTypeEnum SWSSomeIpXf00151 dThe SOMEIP transformer defined in this document shall be used as a transformer if the attribute protocol of the TransformationTechnology is set to SOMEIP and the attribute version of the TransformationTechnology is set to 1 and the attribute transformerClass of the TransformationTechnology is set to serializer cSRSXfrm00101 71 Definition of Identifiers SWSSomeIpXf00001 dA service shall be identified using the ServiceID cSRS Xfrm00008 SWSSomeIpXf00002 dServiceIDs shall be of type 16 bit length unsigned integer uint16cSRSXfrm00008 22 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 The ServiceID of 0xFFFE shall be used to encode nonSOMEIP services See SWSSomeIpXf00130 SWSSomeIpXf00005 dDifferent services within the same vehicle shall have differ ent ServiceIDscSRSXfrm00008 SWSSomeIpXf00006 dA service instance shall be identified using the Service InstanceIDcSRSXfrm00008 SWSSomeIpXf00007 dServiceInstanceIDs shall be of type 16 bit length un signed integer uint16 cSRSXfrm00008 The ServiceInstanceIDs of 0x0000 and0xFFFF shall not be used for a service since 0x0000 is reserved and 0xFFFF is used to describe all service instances See SWSSomeIpXf00130 SWSSomeIpXf00009 dDifferent service instances within the same vehicle shall have different ServiceInstanceIDs cSRSXfrm00008 Note This means that two different camera services shall have two different ServiceInstance IDs SIID1 and SIID2 For one AUTOSAR system that designs a vehicle product line SIID1 shall be the same for all vehicles The same is true for SIID2 If consid ering another AUTOSAR system that designs another vehicle product line different IDs may be used but it makes sense to use the same IDs among different AUTOSAR systems for ease in testing and integration SWSSomeIpXf00010 dMethods and events shall be identified inside a service us ing a 16bit MethodID which is called EventID for events and notifications cSRS Xfrm00008 SWSSomeIpXf00011 dMethods shall use MethodIDs with the highest bit set to 0 while the MethodIDs highest bit shall be set to 1 for events and notifications of fields c SRSXfrm00008 72 Specification of the SOMEIP onwire format Serialization describes the way data is represented in protocol data units PDUs trans ported over an automotive invehicle network 721 Message Length Limitations The usage of TCP allows for larger streams of data to transport SOMEIP header and payload However current transport protocols for CAN and FlexRay limit messages to 4095 Bytes When compatibility to those has to be achieved SOMEIP messages including the SOMEIP header shall not exceed 4095 Bytes 23 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 722 Endianess SWSSomeIpXf00013 dAll headers shall be encoded in network byte order Big Endian MostSignificantByteFirst RFC 791 cSRSXfrm00008 SWSSomeIpXf00172 dThe byte order of the parameters inside the payload shall be defined by byteOrder ofSOMEIPTransformationDescription cSRS Xfrm00008 723 Header SWSSomeIpXf00152 dFor interoperability reasons the header layout shall be iden tical for all implementations of SOMEIP and is described as follows 1 Message ID Service ID Method ID 32 bit 2 Length 32 bit 3 Additional information a Protocol Version 8 bit b Interface Version 8 bit c Message Type 8 bit d Return Code 8 bit 4 Payload variable size The fields are presented in transmission order ie the fields on the top are transmit ted first In the following sections the different header fields and their usage is being describedcSRSXfrm00008 Note Layout is also shown in Figure 73 24 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 Protocol Version 8 bitInterface Version 8 bitMessage Type 8 bit Return Code 8 bitRequest ID Client ID Session ID 32 bitLength 32 bitMessage ID Service ID Method ID 32 bit Payload variable size012345678910111213141516171819202122232425262728293031bit offsetCovered by Length Figure 73 SOMEIP Header Format Figure 73 shows the complete SOMEIP header The SOMEIP transformer only implements the lower part all except Message ID and Length SWSSomeIpXf00015 dThe SOMEIP transformer shall implement all fields of the header except Message ID and Length cSRSXfrm00008 Rationale MessageID and Length are not covered since this allows the AUTOSAR Socket Adap tor header mode to work These are added by other modules in the AUTOSAR BSW Nonetheless they are con