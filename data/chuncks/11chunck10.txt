deserializing SOMEIP transformer shall only interpret the expected data and skip the unexpected cSRSXfrm00101 45 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 To determine the start of the next expected data following the skipped unexpected part the SOMEIP transformer can use the supplied length information 72451 Onedimensional The onedimensional arrays with fixed length n carry exactly n elements of the same type The layout is shown in Figure 77 SWSSomeIpXf00070 dA onedimensional array with fixed length shall be serial ized by concatenating the array elements in order cSRSXfrm00101 Static Array an Element1 Element2 Element3 Elementn element size e byte n e Figure 77 Onedimensional array fixed length 72452 Multidimensional SWSSomeIpXf00072 dThe serialization of multidimensional arrays shall happen in rowmajor orderinmemory layout of multidimensional arrays in the C programming languagecSRSXfrm00101 Static Array anm Element1 Element2 Elementn e n m e E11 E12 E1m m e Figure 78 Multidimensional array fixed length Consult AUTOSAR SWS RTE chapter 5344 for Arrays 46 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 7246 Optional Parameters Optional Elements Optional Elements can be encoded as array with 0 to 1 elements For the serialization of arrays with dynamic length see Chapter 7247 7247 Dynamic Length Arrays Variable Size Arrays Variable size arrays are implemented in AUTOSAR as structs with two members a size indicator which is an integer and holds the number of valid elements in the array the array with variable size In SOMEIP variable size arrays are implemented in a similar manner Only the size indicator is replaced by a length indicator a length indicator which is an integer and holds the length in bytes of the follow ing variable size array the array which contains the valid elements of the variable size array In AUTOSAR also so called oldworld variablesize array data types exist which dont have a size indicator These are not supported by data transformation in general and hence also not supported by the SOMEIP transformer For details refer to con str1387 7 System Template TPSSWCT01644 TPSSWCT01645 TPS SWCT01642 and TPSSWCT01643 SWSSomeIpXf00076 dA variable size array embedded in a structure which also contains a size indicator shall be serialized as the concatenation of the following ele ments the length indicator which holds the length in bytes of the following variable size array the array which contains the valid elements of the variable size array where the data type of the length field shall be determined as specified in SWSSomeIpXf00234 the array shall be serialized like a static size array but does only contain the valid elements The number of elements to serializer shall be taken from the size indicator cSRSXfrm00101 SWSSomeIpXf00234 dA variable size array is represented in AUTOSAR by an ImplementationDataType with the category STRUCTURE and two subelements namely payload and size indicator The data type of the length fields for the 47 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 SOMEIP message for an variable size array shall be determined from the sizeOfAr rayLengthFields If the attribute sizeOfArrayLengthFields is not configured then the default value of 32 bit shall be used as defined by PRSSOMEIP00945 In case of nested variable size arrays AUTOSAR allows to use profiles to specify size indicators which apply to more than one variable size array nested within the same ImplementationDataType Depending on the specific profile dynamicArray SizeProfile the data type of the of the length fields inside the SOMEIP message shall be determined differently VSALINEAR The data type of the SOMEIP length field shall be determined from the single sizeOfArrayLengthFields If the attribute sizeOfArrayLengthFields is not configured then the default value of 32 bit shall be used as defined by PRS SOMEIP00945 VSASQUARE All data type of the SOMEIP length fields shall be determined from the single sizeOfArrayLengthFields If the attribute sizeOfArrayLengthFields is not configured then the default value of 32 bit shall be used as defined by PRS SOMEIP00945 VSARECTANGULAR The data type of all SOMEIP length fields for all dimensions nesting level shall be determined from the single sizeOfArrayLengthFields If the attribute sizeOfArrayLengthFields is not configured then the default value of 32 bit shall be used as defined by PRSSOMEIP00945 VSAFULLYFLEXIBLE The data type of all SOMEIP length fields for all variable size arrays shall be de termined from the single sizeOfArrayLengthFields If the attribute sizeO fArrayLengthFields is not configured then the default value of 32 bit shall be used as defined by PRSSOMEIP00945 cSRSXfrm00101 SRSXfrm00008 This means only the first melements of the variable size array are serialized where mis the value of the size indicator The layout of dynamic arrays is shown in 79 and Figure 710 where L1 andL2 denote the length in bytes 48 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 Element1 element size e n byte Length n 816 or 32 bit Element2 Element3 Elementn Figure 79 Onedimensional array dynamic length Example In the onedimensional array one length field is used which carries the size in bytes of the valid elements in the array SWSSomeIpXf00235 dIf the value of dynamicArraySizeProfile equals VSALINEAR the value of the length field of the serialized variable size array shall be calculated based on the value of the size indicator of the AUTOSAR data type c SRSXfrm00101 SRSXfrm00008 The number of static length elements can be easily calculated by dividing the array length n by the Byte size of an element In the case of dynamical length elements the number of elements cannot be calculated but the elements must be parsed sequentially Elementa 1jk1 L1 byte Length n 816 or 32 bit E11 E12 E1k1 L1 Elementa2jk2 E11 E12 E1k2 L2 L2 byte n byte Figure 710 Multidimensional array dynamic length Example In case of multidimensional variable size arrays each variable size array needs to have its own length field independent of the way how the variable size array is de signed in the AUTOSAR data type ie independent from the value of dynamicAr raySizeProfile as specified in SWSSomeIpXf00234 Hence it is supported to have different length columns and different length rows in the same dimension See k1 andk2