Specification of SOMEIP Transformer AUTOSAR CP R2111 Document TitleSpecification of SOMEIP Transformer Document Owner AUTOSAR Document Responsibility AUTOSAR Document Identification No 660 Document Status published Part of AUTOSAR Standard Classic Platform Part of Standard Release R2111 Document Change History Date Release Changed by Description 20211125 R2111AUTOSAR Release ManagementClarification on network representation SOMEIP Header encoded in network byte order Clarification on SOMEIPLegacyStringSerialization Optional method arguments not supported Clarification on Interface Version Clarification on processing order of header fields in AUTOSAR CP Removed SOMEIPXFEUNKNOWNSERVICE and SOMEIPXFEUNKNOWNMETHOD Introduction on External Trigger Events Clarification on ISignal length of external trigger event Editorial Changes 1 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 20201130 R2011AUTOSAR Release ManagementAdded callresponse context to Client Server requirements Constraint added for data type of length field of variable Strings Added EE2E Error to Table 711 Return Codes Requirement added in case unvailability of optional member in the received serialized byte stream Reworked E2E communication protection for methods sizeOfStringLengthField introduced for the size of the length field for dynamic length strings sizeOfArrayLengthField introduced for the size of the length field for variable size arrays Fixed design issues with E2E communication protection for methods Editorial Changes 20191128 R1911AUTOSAR Release ManagementExtended Serialization for Data Structures in SOMEIP with taglengthvalue encoding set to valid Removed ACK message types replaced implementsSOMEIPStringHandling in class SOMEIPTransformationSignalProps with implementsLegacyStringSerialization Minor corrections clarifications editorial changes For details please refer to the ChangeDocumentation Changed Document Status from Final to published 2 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 20181031 440AUTOSAR Release ManagementChecking for length of received dynamic length strings Extended Serialization for Data Structures in SOMEIP with taglengthvalue encoding Minor corrections clarifications editorial changes For details please refer to the ChangeDocumentation 20171208 431AUTOSAR Release ManagementBugfixes in serialization of strings and data with variable size Signatures improved Minor corrections clarifications editorial changes For details please refer to the ChangeDocumentation 20161130 430AUTOSAR Release ManagementSizes of length fields can be configured independently from each other Support of union data types Minor corrections clarifications editorial changes For details please refer to the ChangeDocumentation 20150731 422AUTOSAR Release ManagementSize of length fields is configurable External trigger events are communciated as fireandforget methods Autonomous error reactions of SOMEIP transformer Minor corrections clarifications editorial changes For details please refer to the ChangeDocumentation 20141031 421AUTOSAR Release ManagementInitial Release 3 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 Disclaimer Disclaimer This work specification andor software implementation and the material contained in it as released by AUTOSAR is for the purpose of information only AUTOSAR and the companies that have contributed to it shall not be liable for any use of the work The material contained in this work is protected by copyright and other types of intel lectual property rights The commercial exploitation of the material contained in this work requires a license to such intellectual property rights This work may be utilized or reproduced without any modification in any form or by any means for informational purposes only For any other purpose no part of the work may be utilized or reproduced in any form or by any means without permission in writing from the publisher The work has been developed for automotive applications only It has neither been developed nor tested for nonautomotive applications The word AUTOSAR and the AUTOSAR logo are registered trademarks 4 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 Table of Contents 1 Introduction and functional overview 7 2 Acronyms and Abbreviations 8 3 Related documentation 9 31 Input documents 9 32 Related standards and norms 10 33 Related specification 10 4 Constraints and assumptions 11 41 Limitations 11 42 Applicability to car domains 11 5 Dependencies to other modules 12 51 File structure 12 511 Code file structure 12 512 Header file structure 12 6 Requirements Tracing 13 7 Functional specification 19 71 Definition of Identifiers 22 72 Specification of the SOMEIP onwire format 23 721 Message Length Limitations 23 722 Endianess 24 723 Header 24 7231 Message ID 32 bit 25 7232 Length 32 bit 26 7233 Request ID 32 bit 26 7234 Protocol Version 8 bit 27 7235 Interface Version 8 bit 27 7236 Message Type 8 bit 28 7237 Return Code 8 bit 28 7238 Payload variable size 29 724 Serialization of Parameters and Data Structures 29 7241 Basic Datatypes 31 7242 Structured Datatypes structs 31 7243 Structured Datatypes and Arguments with Identifier and optional Members 34 7244 Strings 39 7245 Arrays fixed length 44 7246 Optional Parameters Optional Elements 47 7247 Dynamic Length Arrays Variable Size Arrays 47 7248 Bitfield 50 7249 Union Variant 50 5 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 73 Protocol specification 53 731 ClientServer Communication 53 732 SenderReceiver Communication 56 733 External Trigger Events 57 734 Error Handling 58 7341 Return Code 58 7342 Communication Errors and Handling of Communica tion Errors 59 74 Reserved and special identifiers for SOMEIP and SOMEIPSD 61 75 Error Classification 63 751 Development Errors 63 752 Runtime Errors 63 753 Transient Faults 63 754 Production Errors 63 755 Extended Production Errors 64 8 API specification 65 81 Imported types 65 82 Type definitions 65 83 Function definitions 65 831 SomeIpXfExtractProtocolHeaderFields 65 832 SomeIpXftransformerId 67 833 SomeIpXfInvtransformerId 72 834 SomeIpXfInit 76 835 SomeIpXfDeInit 77 836 SomeIpXfGetVersionInfo 77 84 Callback notifications 78 85 Scheduled functions 78 86 Expected interfaces 78 9 Sequence diagrams 79 10 Configuration specification 80 A Referenced Meta Classes 81 B Features of SOMEIP not supported by AUTOSAR SOMEIP transformer 103 C Examples 103 C1 Serialization of a ClientServer Operation 104 C11 Client 105 C12 Server 106 6 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 1 Introduction and functional overview This document specifies the Scalable serviceOriented MiddlewarE over IP SOMEIP Transformer This is a transformer which linearizes data with the SOMEIP onthewire format and specifies an automotiveembedded mechanism for Clien tServer communication The only valid abbreviation is SOMEIP Other abbreviations eg SomeIP are wrong and shall not be used The basic motivation to specify yet another ClientServer and SenderReceiver mech anism instead of using