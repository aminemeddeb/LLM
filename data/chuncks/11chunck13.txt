messageType ofSOMEIPTransforma tionISignalProps NOTIFICATION 0x02 shall be used in the header if attribute mes sageType is set to notification 56 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 REQUESTNORETURN 0x01 shall be used in the header if attribute mes sageType is set to requestNoReturn Set the Return Code to 0x00 cSRSXfrm00102 In SWSSomeIpXf00108 it is specified when session handling is considered for messages which are sent The SOMEIP transformer never checks the session ID on receiver side because the default behaviour of SOMEIP is for senderreceiver commu nication to ignore session IDs on receiver side SWSSomeIpXf00176 dThe payload of a message for SenderReceiver communi cation shall consists of the serialized data element that is transported cSRSXfrm 00102 Error handling and return codes have to be implemented by the application when needed 733 External Trigger Events External trigger events are used to trigger RPCs without any IN INOUT or OUT ar guments or to represent a special kind of an event without any parameters that is transmitted from a server to one or more clients and at which occurrence the Service Consumer shall react in a particular manner External trigger events are realized by SOMEIP as fireandforget methods without arguments SWSSomeIpXf00204 dThe SOMEIP transformer on the trigger source side of transformed external trigger events shall construct header in the following way Set the Request ID to0x00 ifsessionHandlingSR ofSOMEIPTransformationISignal Props is not set to sessionHandlingActive the current value of the Session Handling ID counter otherwise Set the Protocol Version according SWSSomeIpXf00029 Set the Interface Version If interfaceVersion ofSOMEIPTransforma tionISignalProps is set this shall be used Otherwise interfaceVersion ofSOMEIPTransformationDescription shall be used Set the Message Type to REQUESTNORETURN ie0x01 Set the Return Code to 0x00 cSRSXfrm00102 SWSSomeIpXf00205 dThe payload of a message for external trigger event com munication shall be empty cSRSXfrm00102 57 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 Error handling and return codes have to be implemented by the application when needed 734 Error Handling The error handling will be done solely in the application SOMEIP only transports the errors Two different mechanisms for error transportation are supported Return Code and Error Message SWSSomeIpXf00111 dThe SOMEIP transformer shall use the Return Code error handlingcSRSXfrm00102 SRSXfrm00103 Exceptions are specified in SOMEIP but not yet supported by this version of the SOMEIP transformer This can be used to handle all different application errors that might occur in the server In addition problems with the communication medium or intermediate components eg switches may occur which have to be handled eg by means of reliable trans port All messages have a return code field to carry the return code However only re sponses Message Types 0x80 and0x81 use this field to carry a return code to the request Message Type 0x00 they answer All other messages set this field to 0x00 see Chapter 7236 For more detailed errors the layout of the Error Message Mes sage Type 0x81 can carry specific fields for error handling eg an Exception String Error Messages are sent instead of Response Messages 7341 Return Code SWSSomeIpXf00112 dThe Error Handling via Return Code shall be based on the StdReturnType cSRSXfrm00102 SWSSomeIpXf00113 dThe Return Codes shall only be used for ClientServer communicationcSRSXfrm00102 SWSSomeIpXf00170 dIn case of ClientServer communication the Return Code shall transport the ApplicationError s of the executed ClientServerOperation if no SOMEIP error occurred cSRSXfrm00102 This means If a SOMEIP error occurred this error is contained in the Return Code If no SOMEIP error occurred the Return Code contains the error or success code of the executed server runnable If an error occurs in case of clientserver communication the server can be configured to create an autonomous error reaction which will be sent back to the client In that 58 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 response the SOMEIP header fields RequestId andInterface Version shall be equal to the values in the header of the request message This is realized by SWSSomeIpXf00201 which fills the header fields accordingly RequestId is handed over from RTE and InterfaceVersion is consistent to the request as the configuration of the SOMEIP transformer only allows the same inter faceVersion for request and response SWSSomeIpXf00115 dThe Return Codes of Table 711 are currently defined and shall be implemented as described cSRSXfrm00102 ID Name Description 0x00 EOK No error occurred 0x01 ENOTOK An unspecified error occurred 0x04 SOMEIPXFENOTREADY Service ID and Method ID are known Application not running 0x05 SOMEIPXFENOT REACHABLESystem running the service is not reachable inter nal error code only 0x06 SOMEIPXFETIMEOUT A timeout occurred internal error code only 0x07 SOMEIPXFEWRONG PROTOCOL VERSIONVersion of SOMEIP protocol not supported 0x08 SOMEIPXFEWRONG INTERFACE VERSIONInterface version mismatch 0x09 SOMEIPXFE MALFORMEDMESSAGEDeserialization error so that payload cannot be de serialized 0x0a SOMEIPXFE WRONGMESSAGETYPEAn unexpected message type was received eg REQUESTNORETURN for a method defined as REQUEST 0x0b EE2E Not further specified E2E error 0x0c 0x1fRESERVED Reserved for generic SOMEIP errors These errors will be specified in future versions of this document 0x20 0x5e Specific ApplicationError s of ClientServerOperation s These errors are the application errors specified by the ClientServer Interface As the range of ApplicationError s of the ClientServerInterface is0x010x3F the value of an ApplicationError has to be adapted for transport over SOMEIP by adding 0x1F Table 711 Return Codes 7342 Communication Errors and Handling of Communication Errors When considering the transport of ClientServer messages different reliability seman tics exist Maybe the message might reach the communication partner 59 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 At least once the message reaches the communication partner at least once Exactly once the message reaches the communication partner exactly once When using these terms in regard to clientserver communication the term applies to both messages ie call and response or error While different implementations may implement different approaches SOMEIP trans former currently achieves maybe reliability when using the UDP binding and exactly once reliability when using the TCP binding by a suitable configuration of the Ethernet modules Further error handling is left to the application For maybe reliability only a single timeout is needed when using clientserver