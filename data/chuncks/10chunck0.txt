Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 1 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol Document Title Specification on SOMEIP Transport Protocol Document Owner AUTOSAR Document Responsibility AUTOSAR Document Identification No 809 Document Status published Part of AUTOSAR Standard Classic Platfo rm Part of Standard Release R2011 Document Change History Date Release Changed by Change Description 20201130 R2011 AUTOSAR Release Management Several minor bugfixes Editorial changes 2019 1128 R1911 AUTOSAR Release Management Editorial changes Changed Document Status from Final to published 2018 1031 440 AUTOSAR Release Management Minor corrections Editorial changes 2017 1208 431 AUTOSAR Release Management Clarification of t imeout to monitor successful reception Editorial changes 2016 1130 430 AUTOSAR Release Management Initial Release Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 2 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol Disclaimer This work specification and or software implementation and the material contained in it as released by AUTOSAR is for the purpose of information only AUTOSAR and the companies that have contributed to it shall not be liable for any use of the work The material contained in this work is protected by copyright and other types of intellectual property rights The commercial exploitation of the material contained in this work requires a license to such intellectual property rights This work may be util ized or reproduced without any modification in any form or by any means for informational purposes only For any other purpose no part of the work may be utilized or reproduced in any form or by any means without permission in writing from the publish er The work has been developed for automotive applications only It has neither been developed nor tested for non automotive applications The word AUTOSAR and the AUTOSAR logo are registered trademarks Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 3 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol Table of Contents 1 Introduction and functional overview 5 2 Acronyms and abbreviations 6 3 Related documentation 7 31 Input documents 7 32 Related standards and norms 7 33 Related specificati on 7 4 Constraints and assumptions 8 41 Limitations 8 42 Applicability to car domains 8 5 Dependencies to other modules 9 51 AUTOSAR PDU Router 9 52 AUTOSAR Default Error Tracer 9 6 Requirements traceability 10 7 Functional specification 12 71 Overview of the SOMEIP header 13 711 Message Type Field 13 712 Offset Field 14 713 Reserved Field 14 714 More Segments Flag 14 715 Example 15 72 Segmentation of SOMEIP messages TX Path 17 721 Size of SOMEIP segments 17 722 Header of SOMEIP s egments 19 723 Sending of SOMEIP segments 21 724 Interruption of the disassembly process 23 73 Assembly of received SOMEIP messages RX path 24 731 SOMEIP segment received with Offset 0 27 732 SOMEIP segment received with Offset 0 29 733 Interruption of the assembly process 30 74 Error classification 33 741 Development Errors 33 742 Runtime Errors 33 743 Transient Faults 34 744 Production Errors 34 745 Extended Production Errors 34 8 API specification 35 81 Imported types 35 82 Type definitions 35 83 Function definitions 37 831 SomeIpTpGetVersionInfo 37 832 SomeIpTpInit 38 Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 4 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol 833 SomeIpTpTransmit 38 84 Callback notifications 40 841 SomeIpTpTriggerTransmit 40 842 SomeIpTpRxIndication 41 843 SomeIpTpTxConfirmation 42 85 Scheduled functions 43 851 SomeIpTpMainFunctionTx 43 852 SomeIpTpMainFuncti onRx 43 86 Expected Interfaces 45 861 Mandatory Interfaces 45 862 Optional Interfaces 45 863 Configurable interfaces 46 9 Sequence diagrams 47 91 Reception 47 92 Transmission 49 10 Configuration specification 51 101 Containers and configuration parameters 51 1011 SomeIpTp 51 1012 SomeIpTpGeneral 52 1013 SomeIpTpChannel 54 1014 SomeIpTpRxNSdu 55 1015 SomeIpTpRxNPdu 56 1016 SomeIpTpTxNSdu 57 1017 SomeIpTpTxNPdu 58 11 Not applicable requirements 59 Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 5 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol 1 Introduction and functional overview This specification specifies the functionality API and the configuration of the AUTOSAR Basi c Software module SOMEIP TP The task of the SOMEIP TP module is to segment SOMEIP packets which do not fit into one single UDP packet On the reception side it re assembles the received SOMEIP segments Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 6 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol 2 Acronyms and abbreviations Abbreviation Acronym Description SOMEIP Scalable service Oriented MiddlewarE over IP Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 7 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol 3 Related documentation 31 Input documents 1 AUTOSAR Layered Software Architecture AUTOSAR EXP LayeredSoftwareArchitecturepdf 2 AUTOSAR General Requirements on Basic Software Modules AUTOSARSRS BSW Generalpdf 3 AUTOSAR General Specification for Basic Software Modules AUTOSAR SWS BSW Generalpdf 4 AUTOSAR Requirements on SOMEIP Protocol AUTOSARRSSOMEIPProtocol pdf 5 AUTOSAR SOMEIP Protocol Specification AUTOSARPRSSOMEIPProtocol pdf 6 AUTOSAR PDU Router AUTOSARSWSPDURouterpdf 32 Related standards and norms 7 IEC 7498 1 The Basic Model IEC Norm 1994 33 Related specification AUTOSAR provides a General Specification on Basic Software SWS BSW General 3 which is also valid for the SOMEIP TP module Thus the specification SWS BSW General 3shall be considered as additional and required specification for SOMEIP TP module Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 8 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol 4 Constraints and assumptions 41 Limitations The SOMEIP TP is a simpl e protocol to segment SOMEIP messages I t does not implement retry mechanism nor does it reorder ing of received SOMEIP segments These limitations are intended to spare runtime and memory resources on receiver side Nonetheless this is a deviation from the AUTOSAR SOMEIP Protocol Specificat ion PRSSOMEIP00747 to PRSSOMEIP00754 The rational for these limitations is the typical use case which is streaming of large SOMEIP messages 42 Applicability to car domains This module is applicable for SOMEIP communication Specification on SOMEIP Transport Protocol AUTOSAR CP R2011 9 of 59 Document ID 809AUTOSARSWSSOMEIPTransportProtocol 5 Dependencies to other modules 51 AUTOSAR PDU Router The SOMEIP TP module uses the PduR for both directions the transmission path and the reception path 52 AUTOSAR Default Error Tracer In order to be able to report development errors the SOMEIP TP module has to have acce ss to the error hook of the Default Error Tracer Specification on SOMEIP Transport