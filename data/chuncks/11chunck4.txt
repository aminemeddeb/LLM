tained in Figure 73 to show the whole onwireformat 7231 Message ID 32 bit The Message ID is a 32 bit identifier that is used to identify the message The Message ID has to uniquely identify a method or event of a service The assignment of the Message ID is up to the user however the Message ID has to be unique for the whole system ie the vehicle The Message ID can be best compared to a CAN ID and should be handled with a comparable process The next section 72311 describes how to structure the Message IDs in order to ease the organization of Message IDs 72311 Structure of the Message ID In order to structure the different methods events and fields they are clustered into services Services have a set of methods events and fields as well as a Service ID which is only used for this service 25 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 An event shall be part of zero to many eventgroups and an eventgroup shall contain zero to many events A field shall be part of zero to many eventgroups and an event group can contain zero to many fields For interECU ClientServer communication calls we structure the ID in 216services with 215methods Service ID 16 bit 0 1 bit Method ID last 15 bits where the 0Bit is the first bit of the 16 bit Method ID With 16 bit ServiceID and a 16 bit MethodID starting with a 0Bit 15 bit are still left in the MethodID for real values this allows for up to 65536 services with up to 32768 methods each Since events and notifications are transported using ClientServer communication the ID space for the events is further structured Service ID 16 bit 1 1 bit Event ID last 15 bits where the 1Bit is the first bit of the 16 bit Method ID This means that up to 32768 events or notifications per service are possible 7232 Length 32 bit The Length field is 32 bit long and contains the length in Byte of the payload beginning with the Request IDClient ID until the end of the SOMEIPmessage 7233 Request ID 32 bit SWSSomeIpXf00154 dThe Request ID field shall be 32 bit long cSRSXfrm 00008 The Request ID shall be the unique identifier for the calling client inside the ECU Its values are chosen by the RTE and handed over to the SOMEIP transformer SWSSomeIpXf00024 dThe Request ID shall be constructed of the Client ID and Session ID as shown in Table 75 cSRSXfrm00008 Client ID 16 bits Session ID 16 bits Table 75 Construction of Request ID Both are chosen by RTE and handed over to the transformer as RteCsTransactionHandleType 26 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 SWSSomeIpXf00025 dThe clientId inside the RteCsTransactionHandleType handed over from RTE shall be used for the value of the Client ID cSRSXfrm00008 SWSSomeIpXf00026 dThe sequenceCounter inside the RteCsTransactionHandleType handed over from RTE shall be used for the value of the Session ID cSRSXfrm00008 For details of RteCsTransactionHandleType see SWSRte08732 The Request ID allows a client to differentiate multiple calls to the same method There fore the Request ID has to be unique for a single client and server combination only When generating a response message the server has to copy the Request ID from the request to the response message This allows the client to map a response to the issued request even with more than one request outstanding Request IDs may be reused as soon as the response arrived or is not expected to arrive anymore timeout 7234 Protocol Version 8 bit SWSSomeIpXf00155 dThe Protocol Version field shall be 8 bit long cSRSXfrm 00008 SWSSomeIpXf00156 dThe Protocol Version field shall contain the SOMEIP pro tocol versioncSRSXfrm00008 SWSSomeIpXf00029 dThe Protocol Version shall be set to 0x01 cSRSXfrm 00008 7235 Interface Version 8 bit SWSSomeIpXf00030 dThe Interface Version field shall be 8 bit long cSRSXfrm 00008 SWSSomeIpXf00160 dThe Interface Version field shall contain the Version of the Service Interface cSRSXfrm00008 Rationale This is required to catch mismatches in Service definitions and allows de bugging tools to identify the Service Interface used if version is used Note The Version of the corresponding Service Discovery service has to match the version of the Service Interface ie SdServerServiceMajorVersion andor SdClientServiceMajorVersion has to match the used SOMEIPTransforma tionDescription interfaceVersion andor SOMEIPTransformationISig nalProps interfaceVersion see TPSSYST02377 27 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111 7236 Message Type 8 bit SWSSomeIpXf00161 dThe Message Type field shall be 8 bit long cSRSXfrm 00008 The Message Type field is used to differentiate different types of messages SWSSomeIpXf00031 dThe Message Type field shall be filled with one of the values of Table 76cSRSXfrm00008 Number Value Description 0x00 REQUEST A request expecting a response even void 0x01 REQUESTNORETURN A fireforget request 0x02 NOTIFICATION A request of a notification expecting no response 0x80 RESPONSE The response message 0x81 ERROR The response containing an error Table 76 Message Types A regular client request message type 0x00 is answered by a server response mes sage type 0x80 when no error occurred If errors occur an error message message type0x81 will be sent For updating values through notification a callback interface exists message type 0x02 It is possible to send a request that does not have a response message message type 0x01 to use SOMEIP for AUTOSAR SenderReceiver communication 7237 Return Code 8 bit SWSSomeIpXf00163 dThe Return Code field shall be 8 bit long cSRSXfrm 00008 SWSSomeIpXf00164 dThe Return Code field shall be used to signal whether a request has been successfully processed cSRSXfrm00008 For simplification of the header layout every message transports the field Return Code The Return Codes are specified in detail in SWSSomeIpXf00115 SWSSomeIpXf00033 dMessages of Type REQUEST REQUESTNORETURN and Notification have to set the Return Code to 0x00 EOK cSRSXfrm00008 SWSSomeIpXf00168 dThe allowed Return Codes for specific message types are specified in Table 77 cSRSXfrm00008 Message Type Allowed Return Codes REQUEST NA set to 0x00 EOK 28 of 107 Document ID 660 AUTOSARSWSSOMEIPTransformerSpecification of SOMEIP Transformer AUTOSAR CP R2111